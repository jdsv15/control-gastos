<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Gastos</title>
  <style>
    :root {
      font-family: 'Inter', system-ui, sans-serif;
      color-scheme: dark;
      background-color: #1a1a1a;
      color: #fff;
      --navy-blue: #003366;
      --danger-red: #e74c3c;
      --success-green: #2ecc71;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    #root {
      width: 100%;
      max-width: 500px;
    }

    .app-wrapper {
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .container {
      padding: 2rem;
      text-align: center;
    }

    /* PESTAÑAS (TABS) - Ajustadas para ser compactas y cuadradas */
    .tabs {
      display: flex;
      justify-content: center;
      /* Centra los botones */
      gap: 5px;
      margin-bottom: 25px;
    }

    .tab-btn {
      padding: 10px 12px;
      border: 1px solid #fff;
      background: #fff;
      color: #7f8c8d;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 600;
      transition: 0.3s;
      border-radius: 2px;
      width: 90px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.1;
    }

    .tab-btn.active {
      background-color: var(--navy-blue);
      color: white;
      border-color: var(--navy-blue);
    }

    /* BALANCE */
    #balance-container h1:first-child {
      font-size: 1.8rem;
      margin: 0;
      color: #fff;
      font-weight: 700;
    }

    #balance-amount {
      font-size: 3.5rem;
      margin: 5px 0 25px 0;
      font-weight: 700;
    }

    /* LISTA DE HISTORIAL */
    h3 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-bottom: 1px solid #333;
      padding-bottom: 5px;
      margin: 20px 0 15px;
      color: #fff;
      font-weight: 700;
    }

    .list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .list-item {
      background: #fff;
      color: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      margin-bottom: 8px;
      border-radius: 1px;
      position: relative;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .list-item.plus {
      border-right: 5px solid var(--success-green);
    }

    .list-item.minus {
      border-right: 5px solid var(--danger-red);
    }

    /* Botón de eliminar (X roja) */
    .delete-btn {
      position: absolute;
      left: -28px;
      background-color: var(--danger-red);
      color: white;
      border: none;
      width: 20px;
      height: 20px;
      border-radius: 4px;
      /* Cuadrado pequeño con leve redondeo */
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: bold;
    }

    /* FORMULARIO */
    .form-control {
      text-align: left;
      margin-bottom: 15px;
    }

    .form-control label {
      display: block;
      margin-bottom: 6px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .form-control input {
      width: 100%;
      padding: 10px;
      border: 1px solid #dedede;
      border-radius: 2px;
      background: #fff;
      color: #000;
      font-size: 0.95rem;
    }

    .btn-submit {
      width: 100%;
      padding: 12px;
      background-color: var(--navy-blue);
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 0.95rem;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.3s;
    }

    .btn-submit:hover {
      background-color: #002244;
    }
  </style>
</head>

<body>
  <div id="root">
    <div class="app-wrapper">
      <div class="container">

        <!-- COMPONENTE: PESTAÑAS (TABS) -->
        <div class="tabs">
          <button class="tab-btn active" data-tab="summary">Nueva Transacción</button>
          <button class="tab-btn" data-tab="history">Historial</button>
        </div>

        <!-- COMPONENTE: BALANCE -->
        <div id="balance-container">
          <h1>Tu Balance</h1>
          <h1 id="balance-amount">$0</h1>
        </div>

        <!-- SECCIÓN: HISTORIAL -->
        <div id="section-history" class="tab-content" style="display: none;">
          <h3>Historial</h3>
          <ul id="list" class="list">
            <!-- Items dinámicos -->
          </ul>
        </div>

        <!-- SECCIÓN: FORMULARIO -->
        <div id="section-summary" class="tab-content">
          <h3>Agregar nueva transacción</h3>
          <form id="form">
            <div class="form-control">
              <label>Descripción de la transacción</label>
              <input type="text" id="text" placeholder="Ej: Sueldo, Venta, Comida..." required>
            </div>
            <div class="form-control">
              <label>Monto ($) <br><small style="color: #aaa;">Tip: Usa números positivos para ingresos y negativos para
                  gastos</small></label>
              <input type="number" id="amount" placeholder="Introduce cantidad..." step="0.01" required>
            </div>
            <button type="submit" class="btn-submit">Agregar transacción</button>
          </form>
        </div>

      </div>
    </div>
  </div>

  <script>
    // --- LÓGICA CONSOLIDADA ---
    const balanceDisplay = document.getElementById('balance-amount');
    const list = document.getElementById('list');
    const form = document.getElementById('form');
    const textInput = document.getElementById('text');
    const amountInput = document.getElementById('amount');
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

    // Navegación
    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        tabButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.getAttribute('data-tab');
        tabContents.forEach(section => {
          section.style.display = section.id === `section-${target}` ? 'block' : 'none';
        });
      });
    });

    function updateUI() {
      list.innerHTML = '';
      transactions.forEach(t => {
        const li = document.createElement('li');
        li.className = `list-item ${t.amount < 0 ? 'minus' : 'plus'}`;
        li.innerHTML = `
          <button class="delete-btn" onclick="removeTransaction(${t.id})">x</button>
          <span>${t.text}</span>
          <span>${t.amount < 0 ? '-' : '+'}$${Math.abs(t.amount).toFixed(2)}</span>
        `;
        list.appendChild(li);
      });

      const total = transactions.reduce((acc, t) => acc + t.amount, 0).toFixed(2);
      balanceDisplay.innerText = `$${total.replace('.00', '')}`;
      balanceDisplay.style.color = total < 0 ? '#e74c3c' : '#fff';
    }

    function removeTransaction(id) {
      transactions = transactions.filter(t => t.id !== id);
      localStorage.setItem('transactions', JSON.stringify(transactions));
      updateUI();
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const newTransaction = {
        id: Date.now(),
        text: textInput.value,
        amount: parseFloat(amountInput.value)
      };
      transactions.push(newTransaction);
      localStorage.setItem('transactions', JSON.stringify(transactions));
      textInput.value = '';
      amountInput.value = '';
      updateUI();
    });

    updateUI();
  </script>
</body>

</html>